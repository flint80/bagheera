# `StringUtilsDecorator` #

В этом приложении описаны функции, добавленные `StringUtilsDecorator.groovy`. Он действует не так как остальные декораторы, он расширяет класс String, добавляя в него новые методы. В результате, становится возможным использование, например, такого выражения: `List items = 'test'.findAll('(es.*|st)').` Также этот декоратор расширяет класс groovy.util.Node несколькими полезными методами.

Table 1. Расширение класса java.lang.String

| Функция | Описание |
|:--------|:---------|
| String findFirst(String... patterns) | Извлекает из строки первый попавшийся блок, который соответствует одному из регулярных выражений, указанных в patterns. В аргументе можно указывать несколько регулярных выражений, разделяя их запятыми. В каждом регулярном выражении должен содержаться блок, выделенный скобками. Собственно, он и буде возвращен в качестве результата. Пример: 'test'.findFirst('t(e.?)') вернет es. |
| `List<String> getAll(String... patterns)` | Извлекает из строки все блоки, которые соответствует хотя бы одному из регулярных выражений, указанных в patterns. В аргументе можно указывать несколько регулярных выражений, разделяя их запятыми. В каждом регулярном выражении должен содержаться блок, выделенный скобками. Пример: 'my\_test'.findAll('(te.?)', 'my') вернет ['tes', 'my']. |
| `List<String> getGroups(String pattern)` | Находит первый блок, который удовлетворяет pattert, и возвращает список групп, которые указаны в pattern. Пример: 'my\_test'.getGroups('(my).+(es.?)') вернет ['my', 'est']. |
| String trimAll() | Удаляет все пробелы из строки. Пример: 'my test'.trimAll() вернет mytest. |
| String deleteAll(String pattern) | Удаляет из строки все блоки, которые соответствуют заданному регулярному выражению. Пример: 'my test'.deleteAll('te.?') вернет my t. |
| Date parseDate(String pattern) | Преобразует строку в дату, используя указанное выражение. Пример: '2001-01-01'.deleteAll('yyyy-MM-dd') вернет Первое января 2001 года. |
| Node xParse() | Преобразует строку в элемент [Node](http://groovy.codehaus.org/api/groovy/util/Node.html). Эту функцию имеет смылс использовать в случае, если строка представляет собой HTML или XML. Для парсинга используется специальный [SaxParser](http://sourceforge.net/projects/nekohtml/), который умеет работать с некорректно сформированным HTML. |
| `List<String> xPath(Closure path)` | Возвращает коллекцию строк, которые соответствуют указанному xPath-выражению. На самом деле используется gPath-выражения, про которые можно прочитать на http://groovy.codehaus.org/GPath. Пример `'<html><body><p>Пункт 1</p><p>Пункт 2</p></body></html>'.xPath{it.body.p`} вернет `'<p>Пункт 1</p><p>Пункт 2</p>'` |
| String xFind(Closure path) | То же, что и xPath, только возвращает не коллекцию, а ее первый элемент, либо null, если коллекция пуста. |
| `List<Node> xGetNodes(Closure equator)` | Преобразует строку в Node, используя xParse(), затем перебирает все дочерние узлы и выбирает из них те, для которых equator возвращает true. Пример `'<html><body><p>Пункт 1</p><p>Пункт 2</p></body></html>'.xGetNodes{it.name() == 'p'`} вернет коллекцию `'[Node(<p>Пункт 1</p>), Node(<p>Пункт 2</p>)]'` |

Table 2. Расширение класса groovy.util.Node

| Функция | Описание |
|:--------|:---------|
| String toXML() | Возвращает в виде строки XML, который соответствует данному Node. |
| `List<Node> xGet(Closure equator)` | Возвращает все дочерние узлы, для которых equator возвращает true. |
| Node xFind(Closure equator) | То же, что и xGet, только возвращает не коллекцию, а ее первый элемент, либо null, если коллекция пуста. |