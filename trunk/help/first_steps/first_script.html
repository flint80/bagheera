<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="ru_ru" xml:lang="ru_ru">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="concept"/>
<meta name="DC.Title" content="Ваш первый скрипт"/>
<meta name="DC.Relation" scheme="URI" content="../first_steps/first_steps.html"/>
<meta name="DC.Creator" content="Авраменко Владимир"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="first_script"/>
<meta name="DC.Language" content="ru_RU"/>
<link rel="stylesheet" type="text/css" href="../commonltr.css"/>
<title>Ваш первый скрипт</title>
</head>
<body id="first_script"><a name="first_script"><!-- --></a>


	<h1 class="title topictitle1">Ваш первый скрипт</h1>

	<div class="body conbody">
		<p class="p">
			Ну, меньше слов - больше дела! В этом разделе мы создадим скрипт
			для
			генерации FB2-книжки из
			<a class="xref" href="http://bash.org.ru/rss/" target="_blank">RSS-ленты сайта
				bash.im
			</a>
			.
		</p>

		<div class="p">
			Вначале придется установить две программы:
			<ol class="ol">
				<li class="li">
					средство разработки - это Ваш любимый текстовый редактор. Один
					нюанс: этот
					рекдактор должен
					уметь сохранять файлы в кодировке UTF-8.
					Я использую
					бесплатный редактор Notepad++, который можно загрузить
					по ссылке
					<a class="xref" href="http://notepad-plus-plus.org/download" target="_blank">http://notepad-plus-plus.org/download</a>
					.
				</li>

				<li class="li">
					средство просмотра FB2-книжки на компьютере. На мой взгляд, лучше
					всего для этих целей подходит расширение для Firefox
					<a class="xref" href="http://clear.com.ua/ru/projects/firefox/fb2reader">Читалка FB2</a>
					.
					Не хотите использовать Firefox? Тогда мучайтесь с
					<a class="xref" href="http://sourceforge.net/projects/crengine/">
						CoolReader
					</a>
				</li>

			</ol>

		</div>

		<p class="p">
			Итак, откройте Ваш любимый текстовый редактор.
			В редакторе введите
			следующий код
		</p>

		<pre class="pre">
//@ description Bash

showMessage 'готовим книжку - ждите...'
rss('http://bash.org.ru/rss/', 'http://s.bash.org.ru/logo.gif')
showMessage 'книжка успешно создана'
</pre>

		<p class="p">Сохраните
			этот код в файл bash.groovy в директории
			${bagheera_dir}/user-scripts,
			где ${bagheera_dir}
			- директория, куда Вы распаковали архив с программой. Вы должны
			сохранить файл в кодировке UTF-8. Если Вы не знаете/не хотите этого
			делать, используйте только латиницу скриптах - и можете сохранять в
			любй кодировке. Например, в приведенном выше скрипте пришлось бы
			убрать строки, начинающиеся с showMessage, либо написать фразы в этих
			сообщениях на латинице. В Notepad++ нужно выбрать Edit-&gt;Encode as
			UTF-8 without BOM.
		</p>

		<div class="p">
			Рассмотрим подробнее, что же написано в этом скрипте. Первая строка:
			<pre class="pre">	
//@ description Bash		</pre>

			Это краткое описание Вашего скрипта. Оно должно начинаться с "//@
			description". Далее идет пробел, а потом описание скрипта (в данном
			случае "Bash") в одну строку, в котором могут быть любые
			символы(кроме, соответственно, символа новой строки). Эта строка
			опциональна - если ее не будет, то описанием скрипта считается имя
			файла.
		</div>

		<div class="p">
			Далее идет строка:
			<pre class="pre">	
showMessage 'готовим книжку - ждите...'
		</pre>

			В результате отработки этой строки в интерфейсе отобразится сообщение
			"готовим книжку - ждите...". В принципе, эта строка опциональна, Вы
			можете удалить ее из кода - на функциональности это не скажется.
		</div>

		<div class="p">
			Самая главная строка:
			<pre class="pre">	
rss('http://bash.org.ru/rss/', 'http://s.bash.org.ru/logo.gif')
</pre>

			Она запускает генератор книжки из RSS-ленты. Первый аргумент
			"http://bash.org.ru/rss/" - это адрес RSS-ленты. Второй аргумент
			"http://s.bash.org.ru/logo.gif" - это URL обложки книжки.
			Этот
			аргумент опционален, т.е., эту строку можно заменить на
			<pre class="pre">
rss('http://bash.org.ru/rss/')			
			</pre>

		</div>

		<div class="p">
			Ну все - можно тестировать скрипт. Запускаем программу и видим
			приблизительно такой экран
			<div class="fig fignone"><span class="figcap">Figure 1. Список доступных скриптов</span>
				
				<p class="p">
					<img class="image" src="figures/main_screen.PNG"/>
				</p>

			</div>

		</div>

		<div class="p">
			Находим в списке скрипт Bash (это то самое описание, которое Вы
			задали в строке //@ description). Кликните на него 2
			раза(либо выделите и нажмите Старт), и начнется процесс создания
			FB2-книжки.
			<div class="fig fignone"><span class="figcap">Figure 2. Создание книжки</span>
				
				<p class="p">
					<img class="image" src="figures/bash_processing.PNG"/>
				</p>

			</div>

		</div>

		<p class="p">Стоит обратить внимание на кнопки "Стоп" и "Назад". Если нажать на
			"Стоп", то процесс создания книжки прервется. Если нажать на "Назад",
			то процесс также прервертся, и кроме того, Вы возвратитесь на
			страницу со списком доступных скриптов.
		</p>

		<div class="p">
			Через некоторое время Вы должны увидеть экран наподобие этого:
			<div class="fig fignone"><span class="figcap">Figure 3. Процесс завершен</span>
				
				<p class="p">
					<img class="image" src="figures/bash_finished.PNG"/>
				</p>

			</div>

			Ура! Книжка сгенерирована, можно ее посмотреть. Жмите кнопку
			"Открыть". Если Вы делаете это в первый раз, то Windows спросит у
			Вас, какой программой открывать. Выбирайте Firefox, если Вы
			установили Firefox-расширение для просмотра FB2-книг, и наслаждайтесь
			остроумными шутками Цитатника Рунета.
		</div>

	</div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../first_steps/first_steps.html" title="Программа Багира предназначена для создания FB2-книг из различных WEB-источников информации, таких как RSS-ленты и форумы. Прочитав эту часть, Вы уже сможете сгенерировать простые FB2-книжки из RSS-лент.">Первые шаги</a></div>
</div>
</div>

</body>
</html>