= Ваш первый скрипт =

Ну, меньше слов - больше дела! В этом разделе мы создадим скрипт для генерации FB2-книжки из [http://bash.org.ru/rss/ RSS-ленты сайта bash.im ] .

 Вначале придется установить две программы:

  # средство разработки - это Ваш любимый текстовый редактор. Один нюанс: этот рекдактор должен уметь сохранять файлы в кодировке UTF-8. Я использую бесплатный редактор Notepad++, который можно загрузить по ссылке http://notepad-plus-plus.org/download .
  # средство просмотра FB2-книжки на компьютере. На мой взгляд, лучше всего для этих целей подходит расширение для Firefox [http://clear.com.ua/ru/projects/firefox/fb2reader Читалка FB2] . Не хотите использовать Firefox? Тогда мучайтесь с [http://sourceforge.net/projects/crengine/  CoolReader ]

Итак, откройте Ваш любимый текстовый редактор. В редакторе введите следующий код

{{{

//@ description Bash

showMessage 'готовим книжку - ждите...'
rss('http://bash.org.ru/rss/', 'http://s.bash.org.ru/logo.gif')
showMessage 'книжка успешно создана'

}}}

Сохраните этот код в файл bash.groovy в директории ${bagheera_dir}/user-scripts, где ${bagheera_dir} - директория, куда Вы распаковали архив с программой. Вы должны сохранить файл в кодировке UTF-8. Если Вы не знаете/не хотите этого делать, используйте только латиницу скриптах - и можете сохранять в любй кодировке. Например, в приведенном выше скрипте пришлось бы убрать строки, начинающиеся с showMessage, либо написать фразы в этих сообщениях на латинице. В Notepad++ нужно выбрать Edit->Encode as UTF-8 without BOM.

 Рассмотрим подробнее, что же написано в этом скрипте. Первая строка:

{{{

//@ description Bash
}}}

 Это краткое описание Вашего скрипта. Оно должно начинаться с "//@ description". Далее идет пробел, а потом описание скрипта (в данном случае "Bash") в одну строку, в котором могут быть любые символы(кроме, соответственно, символа новой строки). Эта строка опциональна - если ее не будет, то описание скрипта считается имя файла.  Далее идет строка:

{{{

showMessage 'готовим книжку - ждите...'

}}}

 В результате отработки этой строки в интерфейсе отобразится сообщение "готовим книжку - ждите...". В принципе, эта строка опциональна, вы можете удалить ее из кода - на функциональности это не скажется.  Самая главная строка:

{{{

rss('http://bash.org.ru/rss/', 'http://s.bash.org.ru/logo.gif')

}}}

 Она запускает генератор книжки из RSS-ленты. Первый аргумент "http://bash.org.ru/rss/" - это адрес RSS-ленты. Второй аргумент {{{"http://s.bash.org.ru/logo.gif"}}} - это URL обложки книжки. Этот аргумент опционален, т.е., эту строку можно заменить на

{{{

rss('http://bash.org.ru/rss/')			

}}}

 Ну все - можно тестировать скрипт. Запускаем программу и видим приблизительно такой экран.

[http://bagheera.googlecode.com/svn/trunk/help/first_steps/figures/main_screen.PNG]

 Находим в списке скрипт Bash (это то самое описание, которое Вы использовали в скрипте в строке //@ description). Кликните на него 2 раза(либо выделите и нажмите Старт), и начнется процесс создания FB2-книжки.

[http://bagheera.googlecode.com/svn/trunk/help/first_steps/figures/bash_processing.PNG]

Стоит обратить внимание на кнопки "Стоп" и "Назад". Если нажать на "Стоп", то процесс создания книжки прервется. Если нажать на "Назад", то процесс также прервертся, и кроме того, Вы возвратитесь на страницу со списком доступных скриптов.

 Через некоторое время Вы должны увидеть экран наподобие этого: 

[http://bagheera.googlecode.com/svn/trunk/help/first_steps/figures/bash_finished.PNG]

 Ура! Книжка сгенерирована, можно ее посмотреть. Жмите кнопку "Открыть". Если Вы делаете это в первый раз, то Windows спросит у Вас, какой программой открывать. Выбирайте Firefox, если Вы установили Firefox-расширение для просмотра FB2-книг, и наслаждайтесь остроумными шутками Цитатника Рунета. 